## ブランチ運用ルール

* `main`: 最新の開発ブランチ。常に開発が進行しており、未完成の機能が含まれる可能性があります。
* `release/*`: 安定版のリリースブランチ。本番用ビルドはここから行います。
* `feature/*`: 機能ごとの開発ブランチ

> 🔸 本番バグ等の修正も、原則は通常の `feature → main → release` の流れで対応します。

## 🔁 ブランチの関係とマージフロー（GitHub Flow 拡張）

```text
                        +----------------------+ 
                        |   release/x.y.z       | ← 安定版ブランチ（テスト・CI対象）
                        +----------------------+
                          ↑
                          |
                        +----------------------+
                        |        main          | ← 常に最新。作業の集約点
                        +----------------------+
                           ↑        ↑       ↑
                           |        |       |
               +------------+   +----------+   +---------------+
               | feature/xxx |   | feature/yyy |   | feature/zzz | ← 作業単位で分岐
               +------------+   +----------+   +---------------+
```

## GitHubフローの運用

* 作業は `feature/*` ブランチで行ってください
* `main` に向けて Pull Request（PR）を作成してください
* PRは原則レビューを受けてからマージします（レビュー者がいない場合はセルフマージOK）
* `release/*` へのマージはリリース調整時に行い、ここでタグを作成してCI/CDを実行します

## ℹ️ 開発ブランチについて

* 現在の開発は `main` ブランチで進行しています。
* `release/*` ブランチが安定版の位置付けとなります。

- **本番リリース時のバージョンタグ（例：`v2.1.0`）は `main` ブランチ上で作成してください**
    - `main` = `release/x.y.z` であることを確認したうえでタグを作成
    - タグ作成時に CI/CD が実行され、Dockerイメージなどが配布されます
-  `release/*` にテスト用タグ `vx.x.x-test`を打つと、docker イメージのビルドテストが実施されます

## タグ運用ルール

- テスト用タグ： `vx.x.x-test`
  - `release/*` ブランチでビルド確認用に打つ
  - GHCR には `:test`, `:test-latest` が付与される

- 本番用タグ： `vx.x.x`
  - `main`ブランチに`release/x.y.z`でOKがでた段階でつ
  - GHCR には `:v2`, `:latest` ,`:vx.y.z`が付与される

## リリースの流れ
1. main から release/x.y.z を作成
2. release で動作確認・軽微な修正
3. 修正は main → feature → main → release で反映
4. release 完了前に main と release を一致させる
5. main にて vX.Y.Z タグを作成（CI/CDトリガー）

## 📝 その他の注意点
* ドキュメント修正も PR にしてください（README など）

## ブランチ命名例

- `feature/login-ui`
- `feature/fix-password-reset`
- `release/1.3.0`

## PRタイトル例

- Fix: ログイン画面のエラーメッセージ修正
- Add: ユーザー招待機能を追加
